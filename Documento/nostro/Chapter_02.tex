% ===========================================================================
%
%		FEDERICO II THESIS TEMPLATE - ENGLISH
%  					* an example of Chapter 2: mathematical text
%	 
% 		AUTHOR:  		Antonio Esposito (antonio.esposito103@studenti.unina.it)
%		LAST UPDATED:	2017/06/20
%
% ===========================================================================

\chapter{Design}
\section{Descrizione del dominio}
In seguito ad un'analisi dei requisiti del sistema si è resa evidente l'esistenza di alcune entità
principali:
\begin{itemize}
    \item gli \textit{Utenti} che possono registrarsi, visualizzare delle \textit{Strutture}
    e scrivere delle recensioni
    \item degli \textit{Amministratori} i quali possono gestire i dati dei visitatori e le loro recensioni
\end{itemize}
%%%%% ===============================================================================
\section{Analisi dell'architettura}
Il sistema si basa principalmente su due pattern architetturali: Client-Server e Model-View-Controller.\\
Il sistema infatti è composto da diversi client che tramite internet interagiscono con un Server remoto.
\begin{center}
    \begin{figure}[H]
        \includegraphics[width=\textwidth]{Figures/Architettura client server.png}
        \caption{Architettura client server}
    \end{figure}
\end{center}
\subsection{Model-View-Presenter}
Per quanto riguarda l'architettura interna dei client si è deciso di utilizzare il modello Model-View-Presenter (variante Passive View)
favorendo la separazione dei componenti software del sistema e separandone le responsabilità.
In questo modo si riesce ad ottenere alta coesione e basso accoppiamento, ottenendo una buona manutenibilà.\\
A favore di ciò il progetto è diviso in tre sottocartelle principali: Model, View e Presenter.\\
\\
Il modello MVP è un'evoluzione del modello Model View Controller ed è usato principalmente per creare user interfaces 
ed in particolare nella variante Passive View:
la componente \textbf{View} è completamente passiva e statica deputata soltanto alla visualizzazione dei dati.\\
la componente \textbf{Model} ha la responsabilità di fornire i metodi per accedere
ai dati utili all'applicazione, ha conoscenza del dominio applicativo ed è indipendente
dagli altri sottosistemi.\\
la componente \textbf{Presenter} fa da "middle man" tra la View ed il Model e si occupa di prendere i dati dal model, 
fornirli alla view e gestire gli input dell'utente
\begin{center}
    \begin{figure}[H]
        \includegraphics[width=\textwidth]{Figures/MVP client.png}
        \caption{Architettura Model-View-Controller}
    \end{figure}
\end{center}
\section{Diagramma delle classi di design}
\phantomsection
\addcontentsline{toc}{subsection}{Applicativo Desktop}
\includepdf{Class Diagram/Design/Desktop.pdf}
\pagebreak
\includepdf{Class Diagram/Design/Mobile.pdf}
\addcontentsline{toc}{subsection}{Applicativo Mobile}
%------------------------------------
\section{CRC  Cards}
Di seguitop sono riportate tutte le Class Responsability Collaboration(CRC) del prodotto.

\subsection{Entità}
    \input{CRC/Desktop/Recensione-CRC.tex}
    \input{CRC/Desktop/Struttura-CRC.tex} 
    \input{CRC/Desktop/Utente-CRC.tex}
    \input{CRC/Desktop/Admin-CRC.tex}
    \input{CRC/Mobile/Filtri-CRC.tex}
\subsection{Applicativo Desktop} 
    \input{CRC/Desktop/AdminDAO-CRC.tex}
    \input{CRC/Desktop/UtenteDAO-CRC.tex}
    \input{CRC/Desktop/RecensioneDAO-CRC.tex}
    \input{CRC/Desktop/LoginPresenter-CRC.tex}
    \input{CRC/Desktop/SideMenuPresenter-CRC.tex}
    \input{CRC/Desktop/ModificaUtentePresenter-CRC.tex}
    \input{CRC/Desktop/RecensioniPresenter-CRC.tex}
    \input{CRC/Desktop/UtentiPresenter-CRC.tex}
    \input{CRC/Desktop/VisualizzaRecensionePresenter-CRC.tex}
    \input{CRC/Desktop/VisualizzaUtentePresenter-CRC.tex}
    \input{CRC/Desktop/PasswordUtils-CRC.tex}
    \input{CRC/Desktop/MainApp-CRC.tex}
    \pagebreak
\subsection{Applicativo Mobile}
    \input{CRC/Mobile/UtenteDAO-CRC.tex}
    \input{CRC/Mobile/RecensioneDAO-CRC.tex}
    \input{CRC/Mobile/StrutturaDAO-CRC.tex}
    \input{CRC/Mobile/RegistrazioneFragment-CRC.tex}
    \input{CRC/Mobile/LoginFragment-CRC.tex}
    \input{CRC/Mobile/AggiungiRecensioneFragment-CRC.tex}
    \input{CRC/Mobile/ConnessioneAssenteFragment-CRC.tex}
    \input{CRC/Mobile/ListaRecensioniRecycleViewAdapter-CRC.tex}
    \input{CRC/Mobile/ListaStruttureFragment-CRC.tex}
    \input{CRC/Mobile/DettagliStrutturaFragment-CRC.tex}
    \input{CRC/Mobile/PasswordUtils-CRC.tex}
    \input{CRC/Mobile/NessunaStrrutturaTrovataFragment-CRC.tex}
    \input{CRC/Mobile/VisualizzaRecensioneFragment-CRC.tex}
    \input{CRC/Mobile/FiltriFragment-CRC.tex} 
    \input{CRC/Mobile/FiltriRecensioniDialog-CRC.tex}
    \input{CRC/Mobile/VisualizzaSuMappaDialog-CRC.tex} 
    \input{CRC/Mobile/MainActivity-CRC.tex}
    \input{CRC/Mobile/CustomSupportMapFragment-CRC.tex}
%------------------------------------

\section{Diagrammi di sequenza di design}
\includepdf[pages={-}]{Sequence/Design/sequence.pdf}
\section{Diagrammi di stato di design}

\includepdf[pages={-}]{State Chart/Design/SCD Login.pdf} 
\includepdf[pages={-}]{State Chart/Design/SCD Ricerca Struttura.pdf} 
\includepdf[pages={-}]{State Chart/Design/SCD MainActivity.pdf} 

\section{Dettagli di sviluppo}
\subsection{Desktop}
L'applicativo desktop è stato realizzato tramite l'IDE Netbeans utilizzando per la grafica il framework \href{https://openjfx.io/}{JavaFX} 
con \href{http://www.jfoenix.com/}{JFoenix} e \href{https://github.com/controlsfx/controlsfx}{ControlsFX}.
Gli accessi al database sono stati effettuati tramite driver PostgresJDBC e le credenziali di accesso dell'amministratore sono le seguenti:\\
Username: admin 
Password: admin

\subsection{Mobile}
L'applicativo mobile è stato sviluppato utilizzando l'IDE Android Studio.\\
L'integrazione con la mappa è stata realizzata utilizzando le SDK e le API di \href{https://www.mapbox.com/}{MapBox}.\\
\\Le richieste HTTP al web service sono state effettuate tramite la libreria \href{https://developer.android.com/training/volley}{Volley}.
\\Le immagini delle strutture sono state invece integrate utilizzando la libreria \href{https://square.github.io/picasso/}{Picasso} che si occupa di scaricarle da url remoto e mostrarle a video.
\\\\
Il server è situato in cloud utilizzando i servizi di \href{https://aws.amazon.com/it/}{AWS}.\\
Nel corso di tutto il progetto è stato utilizzato Git per versionare i file e permettere la collaborazione efficace di tutti i membri del progetto.